"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=["3g2","3gp","asf","avi","flv","h264","m4v","mov","mp4","mpg","mpeg","rm","srt","swf","vow","vob","wmv"],e={IMAGE:"image",VIDEO:"video",NONE:"none"},f={MEDIAPATH:"pv-mediapath",MEDIATYPE:"pv-mediatype",MUTE:"pv-mute",HEIGHT:"pv-height",SPEED:"pv-speed"},g={container:{"class":"pv-container",height:"250px"},block:{"class":"pv-block",speed:-Math.PI,mediatype:e.IMAGE,mediapath:null,mute:"false"}};b.exports={videoExtensions:d,defaultSettings:g,ELEMENT_DATA_KEYS:f,MEDIA_TYPES:e}},{}],2:[function(a,b,c){b.exports={}},{}],3:[function(a,b,c){var d=a("./constants"),e=d.defaultSettings,f=d.MEDIA_TYPES,g=a("./initContainer"),h=g.setContainerHeight,i=a("./initBlock"),j=i.setBlockSpeed,k=i.setBlockMediaProps,l=i.setBlockMute,m=i.setBlockVisual,n=i.setBlockAttributes;b.exports=function(a){pv.containerArr=[],pv.settings=o(a,e);var b=[].concat(_toConsumableArray(document.getElementsByClassName(pv.settings.container["class"])));b.forEach(function(a){var b={};b.el=a,b.offset=p(b.el),b.el.style.height=h(b,pv.settings),b.height=b.el.clientHeight,b.blocks=[];var c=[].concat(_toConsumableArray(a.getElementsByClassName(pv.settings.block["class"])));c.forEach(function(a){var c={};c.el=a,c.speed=j(c,pv.settings);var d=k(c,pv.settings),e=d.mediatype,g=d.mediapath;if(c.mediatype=e,c.mediapath=g,c.mute=l(c,pv.settings),c.mediatype!==f.NONE){c.mediatype===f.VIDEO&&(b.hasVideoBlock=!0);var h=m(c);if(!h)throw new Error("Did not successfully set media");n(b,c)}b.blocks.push(c)}),pv.containerArr.push(b)})};var o=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];return Object.keys(a).forEach(function(c){if(!a[c]instanceof Object)throw new Error("Expected "+c+" to be of instance Object");Object.keys(a[c]).forEach(function(d){if(a[c][d]instanceof Object)throw new Error("Expected "+c+" to be primitive value");if(!b[c].hasOwnProperty(d))throw new Error("Expected "+d+" to match available settings");b[c][d]=a[c][d]})}),b},p=function(a){var b=a.getBoundingClientRect().top,c=window.pageYOffset||document.documentElement.scrollTop;return b+c}},{"./constants":1,"./initBlock":4,"./initContainer":5}],4:[function(a,b,c){var d=a("./constants"),e=d.videoExtensions,f=d.ELEMENT_DATA_KEYS,g=d.MEDIA_TYPES,h=function(a,b){var c=a.el.getAttribute(f.SPEED);if(!c)return b.block.speed;if("string"==typeof c){var d=Number(c);if(isNaN(d))return;c=d}return 0==c?b.block.speed:c},i=function(a,b){var c=a.el.getAttribute(f.MEDIATYPE),d=a.el.getAttribute(f.MEDIAPATH);if(c===g.NONE)return{mediatype:c,mediapath:d};if(c||(c=b.block.mediatype),d&&q(c,d)&&(c=g.VIDEO),!d&&c!==g.NONE)throw new Error("Media path not defined");return{mediatype:c,mediapath:d}},j=function(a,b){var c=a.el.getAttribute(f.MUTE);return c?"true"==c:b.block.mute},k=function(a){var b=(a.mediatype,a.mediapath);a.el.style.backgroundImage="url('"+b+"')";var c=window.getComputedStyle(a.el).getPropertyValue("background-image");return"none"!=c},l=function(a,b){pv.unmutedBlock&&pv.unmutedBlock.videoEl!==a&&(pv.unmutedBlock.videoEl.muted=!0,pv.unmutedBlock.audioButton.classList.add("mute")),pv.unmutedBlock=b,a.muted=!a.muted,b.muted=a.muted,b.audioButton.classList.toggle("mute")},m=function(a){var b=(a.mediatype,a.mediapath),c=document.createElement("video");if(c.src=b,c.autoplay=!0,c.loop=!0,c.defaultMuted=!0,c.muted=!0,a.muted=!0,a.videoEl=c,a.el.appendChild(c),"undefined"==typeof window.orientation&&!a.mute){c.addEventListener("click",function(){l(c,a)});var d=document.createElement("a");d.href="#",d.className+="audio-icon mute",d.appendChild(document.createElement("span")),d.addEventListener("click",function(b){b.preventDefault(),l(c,a)}),a.audioButton=d,a.el.insertAdjacentElement("afterend",d)}return!0},n=function(a){var b=a.mediatype;return b===g.IMAGE?k(a):b===g.VIDEO&&m(a)},o=function(a,b){r();var c=0,d=0,e=0;a.offset<pv.windowProps.windowHeight?(d=(a.height+a.offset)/Math.abs(b.speed),b.speed>0?(c=-Math.abs(a.offset),e=a.height+a.offset):e=d+a.height):(d=(a.height+pv.windowProps.windowHeight)/Math.abs(b.speed),e=d+a.height,b.speed>0?(c=-d,e=a.height+pv.windowProps.windowHeight/Math.abs(b.speed)):e=d+a.height),Math.abs(c)>=Math.abs(e)&&(e=Math.abs(c)+1),b.el.style.setProperty("padding-bottom",e+"px",null),b.el.style.setProperty("margin-top",c+"px",null)};b.exports={setBlockSpeed:h,setBlockMediaProps:i,setBlockMute:j,setBlockVisual:n,setBlockAttributes:o};var p=function(a){var b=a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase();return b===-1?void 0:b},q=function(a,b){return a===g.VIDEO||e.indexOf(p(b))!==-1},r=function(){pv.windowProps={scrollTop:window.scrollY||document.documentElement.scrollTop,windowHeight:window.innerHeight,windowMidHeight:window.innerHeight/2}}},{"./constants":1}],5:[function(a,b,c){var d=a("./constants"),e=d.ELEMENT_DATA_KEYS,f=function(a,b){var c=a.el.getAttribute(e.HEIGHT);if(!c)return b.container.height;if(!isNaN(Number(c)))return c+"px";var d=c.substr(c.length-2,c.length);if("px"===d||"vh"===d)return c;throw new Error('Invalid height suffix, expected "px" or "vh" but got: '+d)};b.exports={setContainerHeight:f}},{"./constants":1}],6:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{"./constants":1,dup:4}],7:[function(a,b,c){!function(b){var c=function(){var c={};c.init=a("./init"),"undefined"==typeof b.orientation&&(b.onresize=function(){return a("./resize")()}),b.raf=function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(a){b.setTimeout(a,1e3/60)}}();var d=function e(){a("./translate")(),raf(e)};return raf(d),c};"undefined"==typeof pv&&(b.pv=c())}(window)},{"./init":3,"./resize":8,"./translate":9}],8:[function(a,b,c){var d=a("./constants"),e=d.MEDIA_TYPES,f=a("./initblock"),g=f.setBlockAttributes;b.exports=function(){pv.containerArr.forEach(function(a){a.height=a.el.clientHeight,a.blocks.forEach(function(b){b.mediatype!==e.NONE&&g(a,b)})})}},{"./constants":1,"./initblock":6}],9:[function(a,b,c){b.exports=function(){if(pv.windowProps.scrollTop=window.scrollY||document.documentElement.scrollTop,pv.windowProps.scrollTop!==pv.prevScrollTop){pv.prevScrollTop=pv.windowProps.scrollTop;for(var a=0;a<pv.containerArr.length;a++){var b=pv.containerArr[a],c=void 0;if(e(b.offset,b.height)){a>pv.mostReContainerInViewport&&(pv.mostReContainerInViewport=a),c=b.offset<pv.windowProps.windowHeight?pv.windowProps.scrollTop:pv.windowProps.windowHeight-b.offset+pv.windowProps.scrollTop;for(var g=0;g<pv.containerArr[a].blocks.length;g++){var h=pv.containerArr[a].blocks[g];h.videoEl&&(h.videoEl.play(),h===pv.unmutedBlock&&(h.muted||(h.videoEl.muted=h.muted,h.muted?pv.unmutedBlock.audioButton.classList.add("mute"):pv.unmutedBlock.audioButton.classList.remove("mute")))),d(h.el,"translate3d(0,"+Math.round(c/h.speed)+"px, 0)")}}else{if(b.hasVideoBlock)for(var i=0;i<pv.containerArr[a].blocks.length;i++){var j=pv.containerArr[a].blocks[i];j.videoEl&&(j.videoEl.pause(),pv.unmutedBlock===j&&(j.videoEl.muted=!0))}var k=pv.containerArr[a+1];if(k&&!e(k.offset,k.height)&&pv.mostReContainerInViewport<a&&!f(b,k))break;k&&e(k.offset,k.height)&&(pv.mostReContainerInViewport=a+1)}}}};var d=function(a,b){a.style.webkitTransform=b,a.style.MozTransform=b,a.style.msTransform=b,a.style.OTransform=b,a.style.transform=b},e=function(a,b){return pv.windowProps.scrollTop+pv.windowProps.windowHeight-a>0&&pv.windowProps.scrollTop<a+b},f=function(a,b){return a.offset+a.height>b.offset+b.height}},{}]},{},[1,2,3,4,5,7,8,9]);