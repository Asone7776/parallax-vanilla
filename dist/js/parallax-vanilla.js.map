{"version":3,"sources":["parallax-vanilla.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","init","console","log","defineParallaxVanilla","videoExtensions","pv","stringOfIntegers","test","arg","transform","element","style","webkitTransform","MozTransform","msTransform","OTransform","paraArr","windowProps","scrollTop","window","scrollY","windowHeight","innerHeight","windowMidHeight","updateWindowProps_OnRaf","document","documentElement","updateWindowProps_OnResize","offsetTop","rectTop","el","getBoundingClientRect","top","pageYOffset","defaultSettings","container","class","height","block","speed","Math","PI","mediatype","mediapath","undefined","settings","toLowerCase","containers","getElementsByClassName","obj","offset","attrContainerHeight","getAttribute","suffix","substr","clientHeight","blocks","j","attrSpeed","attrMediaPath","attrMediaType","isVideo","videoEl","createElement","src","autoPlay","type","extension","loop","muted","appendChild","isPlaying","play","backgroundImage","error","backgroundImageFromDOM","getComputedStyle","getPropertyValue","scrollDist","paddingBottom","abs","setProperty","push","isInViewport","getExtension","lastIndexOf","indexOf","translate","containerObj","calc","round","firstChild","pause","onresize","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","updateLoop"],"mappings":"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","file":"parallax-vanilla.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nconst init = () => {\n  console.log('module init saying hello')\n}\n\nmodule.exports = init\n\n},{}],2:[function(require,module,exports){\n;(window => {\n  const init = require('./init')\n  init()\n  /**\n   * Defines pv\n   * @return {Object} pv object\n   */\n  const defineParallaxVanilla = () => {\n    const videoExtensions = [\n      '3g2',\n      '3gp',\n      'asf',\n      'avi',\n      'flv',\n      'h264',\n      'm4v',\n      'mov',\n      'mp4',\n      'mpg',\n      'mpeg',\n      'rm',\n      'srt',\n      'swf',\n      'vow',\n      'vob',\n      'wmv',\n    ]\n\n    /**\n  \t * [Library object]\n  \t * @type {Object}\n  \t */\n    let pv = {}\n\n    /**\n  \t * Checks if String argument consists exclusively of numbers\n  \t * @param  {String}  arg String to check\n  \t * @return {Boolean}     True if String consists exclusively of numbers\n  \t */\n    pv.stringOfIntegers = arg => {\n      return /^[0-9]+$/.test(arg)\n    }\n\n    /**\n\t\t * Transform prefixes for CSS\n\t\t * @param  {HTML-element} element A para-block element\n\t\t * @param  {CSS-style} style   E.g. 'transform3d(x, y, z)'\n\t\t */\n    pv.transform = (element, style) => {\n      element.style.webkitTransform = style\n      element.style.MozTransform = style\n      element.style.msTransform = style\n      element.style.OTransform = style\n      element.style.transform = style\n    }\n\n    /**\n\t\t * Primary data handler for containers and blocks.\n\t\t * @type {Array}\n\t\t * @structure\n\t\t * paraArr = [\n\t\t * \tobj : {\n\t\t * \t\tcontainer : {\n\t\t * \t\t\tel : HTML-element,\n\t\t * \t\t\toffset : offsetTop,\n\t\t * \t\t\theight : clientHeight\n\t\t * \t\t},\n\t\t * \t\tblocks : [\n\t\t * \t\t\tblock : {\n\t\t * \t\t\t\tel : HTML-element,\n\t\t * \t\t\t\tspeed : getAttr('pv-speed')\n     *        mediatype: getAttr('pv-mediatype'),\n     *        mediapath: getAttr('pv-mediapath'),\n\t\t * \t\t\t}\n\t\t * \t\t]\n\t\t * \t}\n\t\t * ]\n\t\t */\n    pv.paraArr = []\n\n    /**\n  \t * Window properties\n  \t * @type {Object}\n  \t */\n    pv.windowProps = {\n      scrollTop: window.scrollY,\n      windowHeight: window.innerHeight,\n      windowMidHeight: window.innerHeight / 2,\n    }\n\n    /**\n\t\t * Update selected attributes in windowProps on window raf event\n\t\t */\n    pv.updateWindowProps_OnRaf = () => {\n      pv.windowProps.scrollTop = window.scrollY || document.documentElement.scrollTop\n    }\n\n    /**\n\t\t * Update selected attributes in pv.windowProps on window resize event\n\t\t */\n    pv.updateWindowProps_OnResize = () => {\n      pv.windowProps.scrollTop = window.scrollY || document.documentElement.scrollTop\n      pv.windowProps.windowHeight = window.innerHeight\n      pv.windowProps.windowMidHeight = window.innerHeight / 2\n    }\n\n    /**\n\t\t * Calculates the top offset from an element to the window's || document's top\n\t\t * @param  {HTML-element} el A pv-block element\n\t\t * @return {Int}    The element's top offset to document.\n\t\t * Link: https://plainjs.com/javascript/styles/get-the-position-of-an-element-relative-to-the-document-24/\n\t\t */\n    pv.offsetTop = el => {\n      let rectTop = el.getBoundingClientRect().top,\n        scrollTop = window.pageYOffset || document.documentElement.scrollTop\n      return rectTop + scrollTop\n    }\n\n    /**\n\t\t * Initialize pv.paraArr\n\t\t * @param  {Object} settings User settings\n\t\t */\n    pv.init = settings => {\n      const defaultSettings = {\n        container: {\n          class: 'pv-container',\n          height: '250px',\n        },\n        block: {\n          class: 'pv-block',\n          speed: -Math.PI,\n          mediatype: 'image',\n          mediapath: undefined,\n        },\n      }\n\n      settings = settings || defaultSettings\n      settings.container = settings.container || defaultSettings.container\n      settings.container.class = settings.container.class\n        ? settings.container.class.toLowerCase()\n        : defaultSettings.container.class\n      settings.container.height = settings.container.height || defaultSettings.container.height\n      settings.block = settings.block || defaultSettings.block\n      settings.block.class = settings.block.class\n        ? settings.block.class.toLowerCase()\n        : defaultSettings.block.class\n      settings.block.speed = settings.block.speed || defaultSettings.block.speed\n      settings.block.mediatype = settings.block.mediatype\n        ? settings.block.mediatype.toLowerCase()\n        : defaultSettings.block.mediatype\n      settings.block.mediapath = settings.block.mediapath || defaultSettings.block.mediapath\n\n      const containers = document.getElementsByClassName(settings.container.class)\n      for (let i = 0; i < containers.length; i++) {\n        let obj = {}\n        let container = {}\n\n        container.el = containers[i]\n        container.offset = pv.offsetTop(container.el)\n\n        let attrContainerHeight = container.el.getAttribute('pv-height')\n        if (attrContainerHeight == null) {\n          container.el.style.height = settings.container.height\n        } else {\n          if (pv.stringOfIntegers(attrContainerHeight)) {\n            // string only consists of integers, add px\n            container.el.style.height = attrContainerHeight + 'px'\n          } else {\n            // string has more than integers, assume suffix is either px or vh\n            let suffix = attrContainerHeight.substr(\n              attrContainerHeight.length - 2,\n              attrContainerHeight.length\n            )\n            if (suffix == 'px' || suffix == 'vh') {\n              container.el.style.height = attrContainerHeight\n            } else {\n              throw new Error('Invalid height')\n            }\n          }\n        }\n\n        container.height = container.el.clientHeight\n\n        obj.container = container\n\n        obj.blocks = []\n        const blocks = containers[i].getElementsByClassName(settings.block.class)\n        for (let j = 0; j < blocks.length; j++) {\n          let block = {}\n          block.el = blocks[j]\n\n          const attrSpeed = block.el.getAttribute('pv-speed')\n          if (attrSpeed == null) {\n            block.speed = settings.block.speed\n          } else {\n            if (attrSpeed == 0 || attrSpeed == 0.0) {\n              block.speed = settings.block.speed\n            } else {\n              block.speed = attrSpeed\n            }\n          }\n\n          const attrMediaPath = block.el.getAttribute('pv-mediapath')\n\n          // if (extension === -1) return console.error('Media files must have an extension')\n\n          const attrMediaType = block.el.getAttribute('pv-mediatype')\n          if (attrMediaPath) {\n            block.mediapath = attrMediaPath\n            if (attrMediaType) block.mediatype = attrMediaType\n            if (pv.isVideo(attrMediaType, attrMediaPath)) {\n              let videoEl = document.createElement('video')\n              videoEl.src = attrMediaPath\n              videoEl.autoPlay = true\n              videoEl.type = 'video/' + extension\n              videoEl.loop = true\n              videoEl.muted = true\n              block.el.appendChild(videoEl)\n              block.isPlaying = true\n              videoEl.play()\n            } else {\n              block.el.style.backgroundImage = \"url('\" + attrMediaPath + \"')\"\n            }\n          } else {\n            console.error('Mediapath undefined for pv-block: ', block.el)\n          }\n\n          const backgroundImageFromDOM = window\n            .getComputedStyle(block.el)\n            .getPropertyValue('background-image')\n\n          // if the pv-block for some reason does not have any image\n          if (block.mediatype === 'image' && backgroundImageFromDOM == 'none') return\n\n          // calculates the negative top property\n          // negative scroll distance\n          // plus container height / factor, because whenever we pass the element we'll always scroll the window faster then the animation (if factor < 1 it'll be increased to all is good)\n          let top = 0\n          let scrollDist = 0\n          let paddingBottom = 0\n\n          // if the pv-block offset is less than the windowheight, then the scrolldist will have to be recalculated\n          if (container.offset < pv.windowProps.windowHeight) {\n            scrollDist = (container.height + container.offset) / Math.abs(block.speed)\n\n            if (block.speed > 0) {\n              top = -Math.abs(container.offset)\n              paddingBottom = container.height + container.offset\n            } else {\n              paddingBottom = scrollDist + container.height\n            }\n\n            // the pv-block is below the initial windowheight\n          } else {\n            scrollDist = (container.height + pv.windowProps.windowHeight) / Math.abs(block.speed)\n            paddingBottom = scrollDist + container.height\n\n            if (block.speed > 0) {\n              top = -scrollDist\n              paddingBottom = container.height + pv.windowProps.windowHeight / Math.abs(block.speed)\n            } else {\n              paddingBottom = scrollDist + container.height\n            }\n          }\n\n          if (Math.abs(top) >= Math.abs(paddingBottom)) paddingBottom = Math.abs(top) + 1\n\n          block.el.style.setProperty('padding-bottom', paddingBottom + 'px', null)\n          block.el.style.setProperty('margin-top', top + 'px', null)\n\n          obj.blocks.push(block)\n        } // end of for blocks\n\n        pv.paraArr.push(obj)\n      } // loop container\n      // pp(\"pv.paraArr\", pv.paraArr)\n    }\n\n    // checks if the parallax image is in viewport.\n    pv.isInViewport = (offset, height) => {\n      return (\n        pv.windowProps.scrollTop + pv.windowProps.windowHeight - offset > 0 &&\n        pv.windowProps.scrollTop < offset + height\n      )\n    }\n\n    pv.getExtension = attrMediaPath => {\n      const extension = attrMediaPath\n        .substr(attrMediaPath.lastIndexOf('.') + 1, attrMediaPath.length)\n        .toLowerCase()\n      extension === -1 ? console.log('Invalid extension') : extension\n    }\n\n    // returns {true} if media is a video\n    pv.isVideo = (attrMediaType, attrMediaPath) => {\n      return (\n        attrMediaType === 'video' || videoExtensions.indexOf(pv.getExtension(attrMediaPath)) !== -1\n      )\n    }\n\n    // translates the parallax blocks, creating the effect\n    pv.translate = () => {\n      // loop parallax blocks\n      for (let i = 0; i < pv.paraArr.length; i++) {\n        const containerObj = pv.paraArr[i].container\n        let calc\n\n        // check if parallax block is in viewport\n        if (pv.isInViewport(containerObj.offset, containerObj.height)) {\n          // if any parallax is within the first windowheight, transform from 0 (pv.scrollTop)\n          if (containerObj.offset < pv.windowProps.windowHeight) {\n            calc = pv.windowProps.scrollTop\n\n            // if the parallax is further down on the page\n            // calculate windowheight - parallax offset + scrollTop to start from 0 whereever it appears\n          } else {\n            calc = pv.windowProps.windowHeight - containerObj.offset + pv.windowProps.scrollTop\n          }\n\n          for (let j = 0; j < pv.paraArr[i].blocks.length; j++) {\n            const block = pv.paraArr[i].blocks[j]\n            // if (!block.isPlaying) block.el.firstChild.play() // IF IS VIDEO\n\n            // perform the transform\n            pv.transform(block.el, 'translate3d(0,' + Math.round(calc / block.speed) + 'px, 0)')\n          } // end of for blocks\n        } else {\n          // pause blocks with video\n          for (let j = 0; j < pv.paraArr[i].blocks.length; j++) {\n            let block = pv.paraArr[i].blocks[j]\n            if (block.isPlaying) block.el.firstChild.pause()\n          }\n        } // end of isInViewport if\n      } // end of for container\n    } // translate\n\n    // window resize event\n    /**\n\t   * Window on resize event, updates pv.windowProps\n\t   */\n    window.onresize = () => {\n      pv.updateWindowProps_OnResize()\n      pv.init()\n    }\n\n    /**\n\t\t * Request animation frame\n\t\t * Binds function to window\n\t\t */\n    window.raf = (() => {\n      return (\n        window.requestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        function(callback) {\n          window.setTimeout(callback, 1000 / 60) // 60 FPS\n        }\n      )\n    })()\n\n    /**\n\t\t * Main loop for updating variables and performing translates\n\t\t */\n    const updateLoop = () => {\n      pv.updateWindowProps_OnRaf()\n      pv.translate()\n      raf(updateLoop)\n    }\n\n    /**\n\t\t * Initialize main loop\n\t\t */\n    raf(updateLoop)\n\n    /**\n\t\t * Returns the library\n\t\t */\n    return pv\n  } // end of define_pv()\n\n  /**\n   * Define pv to window if not already done\n   */\n  if (typeof pv === 'undefined') {\n    window.pv = defineParallaxVanilla()\n    console.log('%c parallax-vanilla defined.', 'color: green')\n  } else {\n    console.log('%c parallax-vanilla already defined.', 'color: red')\n  }\n})(window)\n\n},{\"./init\":1}]},{},[1,2]);\n"]}